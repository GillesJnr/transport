{% extends 'transport/demo/layout.html' %}
{% block customcss %}
<style type="text/css">
.custom{
min-width: 50px;
left:-149px !important;
right: 0;
}
</style>
{% endblock %}
<!-- @section("breadcrumb")
<li class="active">@lang('fleet.customers')</li>
@endsection -->
{% block content %}
    <div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="box box-primary">
                <div class="jumbotron">
                    <div class="box-header with-border">
                        <h3 class="box-title">Manage Customers</h3>
                        <a href="#" class="btn btn-success">Add New</a>
                      </div>
                </div>

            <div class="box-body table-responsive">
            <table class="table" id="data_table" style="padding-bottom: 25px">
            <thead class="thead-inverse" >
                <tr>

                <th style="text-align:center;">Name</th>
                <th style="text-align:center;">Email Address</th>
                <th style="text-align:center;">Phone Number</th>
                <th style="text-align:center;">Address</th>
                <th style="text-align:center;">Action</th>

                </tr>
            </thead>
  <tbody>

    {% for row in data %}
  <!-- @foreach($data as row) -->
   <tr>
      <td>{{ row.name }}</td>
      <td>{{ row.email}}</td>
      <td>{{ row.phone }}</td>
      <td>{{ row.address }}</td>

      <td>
        <div class="btn-group">

          <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
            <span class="fa fa-gear"></span>
            <span class="sr-only">Toggle Dropdown</span>
          </button>
          <ul class="dropdown-menu custom" role="menu">
             <li>
               <a type="button" class="mybtn changepass" data-id="{{row.id}}" data-toggle="modal" data-target="#changepass" title="Change Password"><i class="fa fa-key"  aria-hidden="true" style="color:#269abc;"></i> Change Password</a>
            </li>
            <li><a href="#"><span aria-hidden="true" class="glyphicon glyphicon-pencil" style="color: #f0ad4e;"></span>Edit</a></li>
            <li><a href="javascript:document.form_{{row.id}}.submit();"><span class="glyphicon glyphicon-trash" aria-hidden="true" style="color: #dd4b39"></span>Delete</a></li>
            
          </ul>
        </div>
        <!-- {!! Form::open(['url' => 'customers/'.row->id,'method'=>'DELETE','class'=>'form-horizontal','name'=>'form_'.row->id]) !!}

        {!! Form::hidden("id",row->id) !!}

        {!! Form::close() !!} -->
      </td>

    </tr>
  <!-- @endforeach -->
  {% endfor %}

  </tbody>
  </table>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
{% endblock %}

{% block script %}

<script type="text/javascript">

$("#del_btn").on("click",function(){
    var id=$(this).data("submit");
    $("#form_"+id).submit();
  });
   $('#myModal').on('show.bs.modal', function(e) {
  var id = e.relatedTarget.dataset.id;
  $("#del_btn").attr("data-submit",id);
    });

   $('#changepass').on('show.bs.modal', function(e) {
  var id = e.relatedTarget.dataset.id;

  $("#driver_id").val(id);
    });

   $("#changepass_form").on("submit",function(e){
    $.ajax({
      type: "POST",
      url: $(this).attr("action"),
      data: $(this).serialize(),
      success: function(data){

       new PNotify({
            title: 'Success!',
            text: 'Password Has Been Changed',
            type: 'info'
        });
      },

      dataType: "html"
    });
    $('#changepass').modal("hide");
e.preventDefault();
});
</script>
{% endblock %}